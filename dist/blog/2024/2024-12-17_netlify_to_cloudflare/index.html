<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="max-width=device-width, initial-scale=1.0">
		<title>Netlify to Cloudflare</title>
		<meta name="description" content="Moving 11ty site to Cloudflare">
		
		<meta property="og:image" content="https://stuffandthings.lol/og-images/0b7dde0c.png?v=12e0705704e6">

		<meta property="og:title" content="stuff&amp;things">
		<meta property="og:type" content="website">
		<meta name="description" content="Just some stuff about things.">
		<meta property="og:description" content="Moving 11ty site to Cloudflare">
		<meta property="og:url" content="https://stuffandthings.lol/blog/2024/2024-12-17_netlify_to_cloudflare/">
		<meta name="generator" content="Eleventy v3.0.0">
		<meta name="fediverse:creator" content="@jasonm@social.lol">
		<link rel="alternate" href="feed/feed.xml" type="application/atom+xml" title="stuff&amp;things">
		<link rel="alternate" href="feed/json.njk" type="application/json" title="stuff&amp;things">

		
		<link rel="webmention" href="https://webmention.io/stuffandthings.lol/webmention">
		<link rel="pingback" href="https://webmention.io/stuffandthings.lol/xmlrpc">

		<span class="p-author h-card" style="display: none">
            <picture><source type="image/avif" srcset="/.11ty/image/?src=content%2Fassets%2Ficons%2Ffavicon.png&width=96&format=avif&via=transform 96w"><source type="image/webp" srcset="/.11ty/image/?src=content%2Fassets%2Ficons%2Ffavicon.png&width=96&format=webp&via=transform 96w"><source type="image/png" srcset="/.11ty/image/?src=content%2Fassets%2Ficons%2Ffavicon.png&width=96&format=png&via=transform 96w"><img loading="lazy" decoding="async" class="u-photo" src="/.11ty/image/?src=content%2Fassets%2Ficons%2Ffavicon.png&width=96&format=jpeg&via=transform" alt="stuff&things logo" width="96" height="96"></picture>
            <picture><source type="image/avif" srcset="/.11ty/image/?src=content%2Fassets%2Ficons%2Ffavicon.png&width=96&format=avif&via=transform 96w"><source type="image/webp" srcset="/.11ty/image/?src=content%2Fassets%2Ficons%2Ffavicon.png&width=96&format=webp&via=transform 96w"><source type="image/png" srcset="/.11ty/image/?src=content%2Fassets%2Ficons%2Ffavicon.png&width=96&format=png&via=transform 96w"><img loading="lazy" decoding="async" class="u-logo" src="/.11ty/image/?src=content%2Fassets%2Ficons%2Ffavicon.png&width=96&format=jpeg&via=transform" alt="stuff&things logo" width="96" height="96"></picture>
            <a class="p-name" href="https://stuffandthings.lol" rel="author">Jason Moser</a>
            <span class="p-note">Just some stuff about things.</span>
            <a rel="me" class="u-url u-uid" href="https://stuffandthings.lol/blog/2024/2024-12-17_netlify_to_cloudflare/">Permalink</a>
        </span>

		
		
		
		<link rel="apple-touch-icon" sizes="180x180" href="https://stuffandthings.lol/img/apple-touch-icon.png?v=0660a069457d">
		<link rel="icon" sizes="192x192" href="https://stuffandthings.lol/img/android-chrome-192x192.png?v=ca16d7966ed0">
		<link rel="icon" sizes="512x512" href="https://stuffandthings.lol/img/android-chrome-512x512.png?v=c0749981e66b">
		<link rel="icon" sizes="32x32" href="https://stuffandthings.lol/img/favicon.png?v=0660a069457d">
		<link rel="icon" href="https://stuffandthings.lol/img/favicon.ico?v=a18e248fb035">
		

	  	<link rel="preload" href="/assets/fonts/DepartureMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">

	  <!-- preloads in page data -->


		<link rel="stylesheet" href="/6cxjMoC1-2.css?v=58c1d37c39b0">
	</head>

	<body>
		<a href="#skip" class="visually-hidden">Skip to main content</a>

		<header>
			<center><a href="/" class="home-link" aria-label="Home"><svg height="79" width="371" xmlns="http://www.w3.org/2000/svg">
    <text x="0" y="48" alignment-baseline="middle" font-family="var(--font-family)" fill="var(--text-color-link)" font-size="1.25em" stroke="none" stroke-width="2px">stuff<tspan alignment-baseline="middle" stroke="none" fill="var(--text-color-link-active)">&</tspan><tspan alignment-baseline="middle" fill="var(--text-color-link-visited)" stroke="none" stroke-width="2px">things</tspan></text>
	<text x="3" y="44" alignment-baseline="middle" font-family="var(--font-family)" fill="var(--text-color-link-visited)" font-size="1.25em" stroke="var(--color-gray-50)" stroke-width="2" paint-order="stroke fill">stuff<tspan alignment-baseline="middle" stroke="var(--color-gray-50)" stroke-width="2" fill="var(--text-color-link)" paint-order="stroke fill">&</tspan><tspan alignment-baseline="middle" fill="var(--text-color-link-active)" stroke="var(--color-gray-50)" stroke-width="2" paint-order="stroke fill">things</tspan></text>
	</svg></a>
			<nav>
				<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/">Home</a></li>
					<li class="nav-item"><a href="/blog/">Blog</a></li>
					<li class="nav-item"><a href="/about/">About</a></li>
					<li class="nav-item"><a href="/guestbook/">Guestbook</a></li>
					<li class="nav-item"><a href="/notes/">Notes</a></li>
					<li class="nav-item"><a href="/blogroll/">Blogroll</a></li>
					<li class="nav-item"><a href="/feed/feed.xml">Feed</a></li>
				</ul>
				<p>
					<button id="autoSwitch" type="button" onclick="switchAuto()">Auto</button>
					 <button id="lightSwitch" type="button" onclick="switchLight()">Light</button>
					 <button id="darkSwitch" type="button" onclick="switchDark()">Dark</button>
				</p>
			</nav></center>
		</header>

		<main id="skip">
			<heading-anchors>
				
<h1 id="netlify-to-cloudflare">Netlify to Cloudflare</h1>

<ul class="post-metadata">
	<li><time datetime="2024-12-17" style="color: var(--text-color-link)">17 December 2024</time></li>
	<li><a href="/tags/11ty/" class="post-tag" aria-label="11ty">11ty</a>, </li>
	<li><a href="/tags/cloudflare/" class="post-tag" aria-label="cloudflare">cloudflare</a>, </li>
	<li><a href="/tags/netlify/" class="post-tag" aria-label="netlify">netlify</a></li>
</ul>

<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p>12/18/2024 - Thank you to <a href="https:rknight.me">Robb Knight’s</a>, creator of <a href="https://echofeed.app">EchoFeed</a> help, this post is updated below with information to skip blocking EchoFeed if you’re using it.</p>
</div>
<p>I had been contemplating the move to Cloudflare from Netlify for a host of reasons; their approach to keeping AI bots, etc., from your site was one of them. Then I got an email from Netlify telling me I had reached 50% of usage a week or so ago and pushing me to a different tiered plan. This site doesn’t get a ton of traffic and Cloudflare’s free plan has more robust features than Netlify’s, so the time had come.</p>
<p>It was relatively simple. If you, like me, did not use Netlify’s CLI to deploy to your site (i.e., you use the command <code>npx @11ty/eleventy</code> to build) then all you need to do is <a href="https://developers.cloudflare.com/pages/framework-guides/deploy-an-eleventy-site/">go to Cloudflare’s docs on deploying an 11ty site</a> and follow along. It is dead simple … sort of.</p>
<p>The “sort of” is if you use a custom domain. Cloudflare does mostly force you into using them as the primary DNS (at least on the free plan). For me this was fine.</p>
<div class="markdown-alert markdown-alert-tip"><p class="markdown-alert-title"><svg class="octicon octicon-light-bulb mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</p><p>Before you make the move from Netlify to Cloudflare, I would strongly encourage you to add your domain to Cloudflare first.</p>
</div>
<p>You’ll need to <a href="https://developers.cloudflare.com/dns/zone-setups/full-setup/setup/#update-your-nameservers">change the nameservers at your registrar</a> and while activation for me happened pretty quickly, you want to make sure you’re not caught in limbo with your site deploying to Cloudflare and the domain down (I think I ran into this for a few minutes). Also, as you’re setting up the custom domain, Cloudflare has an Auto DNS feature that will search for your records. I ended up mostly setting them up manually but your mileage may vary.</p>
<p>If you’re using EchoFeed with your feed, you’ll also need to unblock it. Log in to Cloudflare, select <code>Websites</code> from the menu and click on the one that you want to make changes to. Under <code>Security</code> on the left menu, select <code>WAF</code>. Then select the <code>Custom Rules</code> tab and add your rule:</p>
<ol>
<li>Field = <code>User Agent</code></li>
<li>Operator = <code>equals</code></li>
<li>Value = <code>EchoFeed fetch bot; https://echofeed.app</code></li>
<li>Under <code>Then take action</code> choose <code>Skip</code>.</li>
<li>Choose which WAF components to skip (there should be four checkboxes, I chose them all).</li>
<li>Under <code>Place at</code>, select order <code>First</code>.</li>
</ol>
<p>Now EchoFeed should no longer be blocked.</p>
<p>The last thing I have to do yet is set up scheduled builds via GitHub Actions to Cloudflare<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>. This isn’t as much of a priority for me now. It deploys automatically after pushing to my repository and I mostly had the action set up because I had webmentions on my site. Since removing those, I don’t have much of a need for it anymore.</p>
<p>Including the wait for the domain to activate on Cloudflare, the total process took me about an hour and a half and the only interaction I had to take with Netlify during it was to delete the site from Netlify once I was sure the DNS records were set and the domain was up and running on Cloudflare.</p>
<section class="footnotes">
<h4 id="footnotes">Footnotes</h4>
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p><a href="https://jonas.brusman.se/deploy-eleventy-to-cloudflare-with-githubs-action-cache/">Jonas Brusman’s</a> and <a href="https://cassey.dev/11ty-on-cloudflare-pages/">Cassey Lottman’s</a> posts on creating an action for this are excellent resources and I will refer back to them when I get around to setting it up. <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

<ul class="links-nextprev"><li class="links-nextprev-prev"><em style="color: var(--border-color)">← Previous</em><br> <a href="/blog/2024/2024-12-09_alerts-and-footnotes/" aria-label="Adding GitHub Style Alerts and Footnotes">Adding GitHub Style Alerts and Footnotes</a></li><li class="links-nextprev-next"><em style="color: var(--border-color)">Next →</em><br><a href="/blog/2025/a_new_year/" aria-label="Welcome to 2025">Welcome to 2025</a></li>
</ul>

			</heading-anchors>
		</main>

<footer class="footer">
		<ul class="footer-links">
			<li>
				<a rel="me" href="https://social.lol/@jasonm" target="_blank" aria-label="Social.lol Profile"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="var(--text-color-link)" d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127C.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611c.118 1.24.325 2.47.62 3.68c.55 2.237 2.777 4.098 4.96 4.857c2.336.792 4.849.923 7.256.38q.398-.092.786-.213c.585-.184 1.27-.39 1.774-.753a.06.06 0 0 0 .023-.043v-1.809a.05.05 0 0 0-.02-.041a.05.05 0 0 0-.046-.01a20.3 20.3 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.6 5.6 0 0 1-.319-1.433a.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546c.376 0 .75 0 1.125-.01c1.57-.044 3.224-.124 4.768-.422q.059-.011.11-.024c2.435-.464 4.753-1.92 4.989-5.604c.008-.145.03-1.52.03-1.67c.002-.512.167-3.63-.024-5.545m-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976c-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35c-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102q0-1.965 1.011-3.12c.696-.77 1.608-1.164 2.74-1.164c1.311 0 2.302.5 2.962 1.498l.638 1.06l.638-1.06c.66-.999 1.65-1.498 2.96-1.498c1.13 0 2.043.395 2.74 1.164q1.012 1.155 1.012 3.12z"></path></svg></a>
			</li>
			<li>
				<a href="https://github.com/reddmo" target="_blank" rel="me" aria-label="Github Profile"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="var(--text-color-link-visited)" d="M12 .297c-6.63 0-12 5.373-12 12c0 5.303 3.438 9.8 8.205 11.385c.6.113.82-.258.82-.577c0-.285-.01-1.04-.015-2.04c-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729c1.205.084 1.838 1.236 1.838 1.236c1.07 1.835 2.809 1.305 3.495.998c.108-.776.417-1.305.76-1.605c-2.665-.3-5.466-1.332-5.466-5.93c0-1.31.465-2.38 1.235-3.22c-.135-.303-.54-1.523.105-3.176c0 0 1.005-.322 3.3 1.23c.96-.267 1.98-.399 3-.405c1.02.006 2.04.138 3 .405c2.28-1.552 3.285-1.23 3.285-1.23c.645 1.653.24 2.873.12 3.176c.765.84 1.23 1.91 1.23 3.22c0 4.61-2.805 5.625-5.475 5.92c.42.36.81 1.096.81 2.22c0 1.606-.015 2.896-.015 3.286c0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a>
			</li>
      		<li>
				<a href="https://bsky.app/profile/jasonmoser.bsky.social" target="_blank" aria-label="BlueSky Profile"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="var(--text-color-link-active)" d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565C.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479c.815 2.736 3.713 3.66 6.383 3.364q.204-.03.415-.056q-.207.033-.415.056c-3.912.58-7.387 2.005-2.83 7.078c5.013 5.19 6.87-1.113 7.823-4.308c.953 3.195 2.05 9.271 7.733 4.308c4.267-4.308 1.172-6.498-2.74-7.078a9 9 0 0 1-.415-.056q.21.026.415.056c2.67.297 5.568-.628 6.383-3.364c.246-.828.624-5.79.624-6.478c0-.69-.139-1.861-.902-2.206c-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8"></path></svg></a>
			</li>
      		<li>
				<a href="/feed/feed.xml" aria-label="RSS Feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24zM3.291 17.415a3.3 3.3 0 0 1 3.293 3.295A3.303 3.303 0 0 1 3.283 24C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295M15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91"></path></svg></a>
			</li>
		</ul>
		<center>
			<p style="color: var(--text-color-link)">Built with <a href="https://www.11ty.dev/">Eleventy v3.0.0</a></p>

			<p><a href="https://echofeed.app"><picture><source type="image/svg+xml" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2Fpowered-by-echofeed-white.svg&width=88&format=svg&via=transform 88w"><source type="image/avif" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2Fpowered-by-echofeed-white.svg&width=88&format=avif&via=transform 88w"><source type="image/webp" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2Fpowered-by-echofeed-white.svg&width=88&format=webp&via=transform 88w"><source type="image/png" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2Fpowered-by-echofeed-white.svg&width=88&format=png&via=transform 88w"><img loading="lazy" decoding="async" src="/.11ty/image/?src=content%2Fassets%2Fsvg%2Fpowered-by-echofeed-white.svg&width=88&format=jpeg&via=transform" alt="Powered by Echofeed Button" width="88" height="31"></picture></a> <a href="https://social.lol/@jasonm"><picture><source type="image/avif" srcset="/.11ty/image/?src=content%2Fassets%2Fimages%2Fmastodon.gif&width=88&format=avif&via=transform 88w"><source type="image/webp" srcset="/.11ty/image/?src=content%2Fassets%2Fimages%2Fmastodon.gif&width=88&format=webp&via=transform 88w"><source type="image/png" srcset="/.11ty/image/?src=content%2Fassets%2Fimages%2Fmastodon.gif&width=88&format=png&via=transform 88w"><source type="image/gif" srcset="/.11ty/image/?src=content%2Fassets%2Fimages%2Fmastodon.gif&width=88&format=gif&via=transform 88w"><img loading="lazy" decoding="async" src="/.11ty/image/?src=content%2Fassets%2Fimages%2Fmastodon.gif&width=88&format=jpeg&via=transform" alt="Follow me on Mastodon" width="88" height="31"></picture></a> <a href="https://home.omg.lol"><picture><source type="image/svg+xml" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2Fomglol.svg&width=88&format=svg&via=transform 88w"><source type="image/avif" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2Fomglol.svg&width=88&format=avif&via=transform 88w"><source type="image/webp" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2Fomglol.svg&width=88&format=webp&via=transform 88w"><source type="image/png" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2Fomglol.svg&width=88&format=png&via=transform 88w"><img loading="lazy" decoding="async" src="/.11ty/image/?src=content%2Fassets%2Fsvg%2Fomglol.svg&width=88&format=jpeg&via=transform" alt="OMG.LOL Home" width="88" height="31"></picture></a></p>
			<p><a href="https://ko-fi.com/andycarolan"><picture><source type="image/svg+xml" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2FIAmNotARobot_05.svg&width=88&format=svg&via=transform 88w"><source type="image/avif" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2FIAmNotARobot_05.svg&width=88&format=avif&via=transform 88w"><source type="image/webp" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2FIAmNotARobot_05.svg&width=88&format=webp&via=transform 88w"><source type="image/png" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2FIAmNotARobot_05.svg&width=88&format=png&via=transform 88w"><img loading="lazy" decoding="async" src="/.11ty/image/?src=content%2Fassets%2Fsvg%2FIAmNotARobot_05.svg&width=88&format=jpeg&via=transform" alt="I Am Not a Robot Button" width="88" height="31"></picture></a> <a href="https://ko-fi.com/andycarolan"><picture><source type="image/svg+xml" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2FCoffeePowered_02.svg&width=88&format=svg&via=transform 88w"><source type="image/avif" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2FCoffeePowered_02.svg&width=88&format=avif&via=transform 88w"><source type="image/webp" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2FCoffeePowered_02.svg&width=88&format=webp&via=transform 88w"><source type="image/png" srcset="/.11ty/image/?src=content%2Fassets%2Fsvg%2FCoffeePowered_02.svg&width=88&format=png&via=transform 88w"><img loading="lazy" decoding="async" src="/.11ty/image/?src=content%2Fassets%2Fsvg%2FCoffeePowered_02.svg&width=88&format=jpeg&via=transform" alt="Coffee Powered Button" width="88" height="31"></picture></a></p>
		</center>
	<script>
		const html = document.querySelector("html");
		const mode = localStorage.getItem("mode");

		if (mode === "light") switchLight();
		if (mode === "dark") switchDark();

		function switchAuto() {
  		html.style.setProperty("color-scheme", "light dark");
  		localStorage.removeItem("mode");
		}

		function switchLight() {
  		html.style.setProperty("color-scheme", "light");
  		localStorage.setItem("mode", "light");
		}

		function switchDark() {
  		html.style.setProperty("color-scheme", "dark");
  		localStorage.setItem("mode", "dark");
		}
	</script>

</footer>

		<!-- This page `/blog/2024/2024-12-17_netlify_to_cloudflare/` was built on 2025-02-01T04:52:50.357Z -->
		<script type="module" src="/MYC5xLnUpl.js?v=aa4c21c53fc8"></script>
	</body>
</html>
